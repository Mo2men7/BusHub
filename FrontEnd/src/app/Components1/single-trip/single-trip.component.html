@if (seats &&allseats&& details&&selected&&userDetails&&ticket) {

<!-- navbar -->
<app-navbar></app-navbar>
<!--header-->



  <div class="fs-5 details-container text-white text-center">
    <div class="details-container1">

      <span class="text-capitalize badge text-bg1">{{ details?.from_location }} </span>
      <i class="bi bi-circle-fill " style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg " style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1"></i>
      <i class="bi bi-bus-front hide1" style="font-size: 30px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg hide1" style="margin-right: -6px"></i>
      <i class="bi bi-dash-lg " style="margin-right: -5px"></i>
      <i class="bi bi-circle "></i>
      <span class="text-capitalize badge text-bg1"> {{ details?.to_location }}</span>
      <br />
      <div class="my-3 m-auto">
        <span class="badge text-bg1">{{ details?.price }}</span> LE per person
      </div>
      <div>
        {{ details?.date | customDate }}, {{ details?.time | timeFormat }}
      </div>
    </div>
    <div class="firstblur"></div>
    <div class="secondblur"></div>
  </div>



<!-- ======================================================================= -->

<!-- ========================================================================= -->
<!-- steps to book trip -->
<div class="container1">
  <mat-stepper orientation="vertical">
    <mat-step class="abc">
      <ng-template matStepLabel>Choose Your Seat</ng-template>
      <ng-template matStepContent>

        <div class="row background-edit grid-container container-fluid">
          <div class="col-lg-1 col-md-1 col-sm-1 text-start  container-fluid">
            <!-- Booked  Available Selected -->
            <div class="text-start seats_3">
              <div class="seat1Of3">
                <span class="mx-2 "><mat-icon svgIcon="seat-icon" class="seat-red size"></mat-icon></span>
                <span>Booked</span>
              </div>
              <div class="seat2Of3">
                <span class="mx-2 "><mat-icon svgIcon="seat-icon" class="seat-gray size"></mat-icon></span>
                <span>Available</span>
              </div>
              <div class="seat3Of3">
                <span class="mx-2 "><mat-icon svgIcon="seat-icon" class="seat-blue size"></mat-icon></span>
                <span>Selected </span>
              </div>
            </div>
          </div>
          <!-- ======================================================================= -->
          <div class="col-lg-4 col-md-4 col-sm-4  container-fluid">
            @if (typeId=='1' || typeId=='2') {
            <div class="row seats-11 text-center">
              @for(seat of seats ;track $index ){ @if(($index+1)% 4== 1 ){
              <div class="col-2 img_location">
                <div class="">
                  <a routerLink="/book-trip/{{ tripId }}/{{ typeId }}" [class.not-clickable]="seat.reserved != '0'"
                    [class.seat-red]="seat.reserved != '0'" (click)="reserve(seat)" id="{{ seat.id }}">
                    <mat-icon svgIcon="seat-icon"></mat-icon>
                  </a>
                </div>
                <div>
                  {{ seat.seat_num }}
                </div>
              </div>
              } @if(($index+1)% 4== 2 ){
              <div class="col-2 img_location">
                <a routerLink="/book-trip/{{ tripId }}/{{ typeId }}" [class.not-clickable]="seat.reserved != '0'"
                  [class.seat-red]="seat.reserved != '0'" (click)="reserve(seat)" id="{{ seat.id }}">
                  <mat-icon svgIcon="seat-icon"></mat-icon>
                </a>
                <div class="seat_num">{{ seat.seat_num }}</div>
              </div>
              <div class="col-4"></div>
              } @if(($index+2)% 4== 0 ){
              <div class="col-2 img_location">
                <a routerLink="/book-trip/{{ tripId }}/{{ typeId }}" [class.not-clickable]="seat.reserved != '0'"
                  [class.seat-red]="seat.reserved != '0'" (click)="reserve(seat)" id="{{ seat.id }}">
                  <mat-icon svgIcon="seat-icon"></mat-icon>
                </a>
                <div class="seat_num">{{ seat.seat_num }}</div>
              </div>
              } @if(($index+1)% 4== 0 ){
              <div class="col-2 img_location">
                <a routerLink="/book-trip/{{ tripId }}/{{ typeId }}" [class.not-clickable]="seat.reserved != '0'"
                  [class.seat-red]="seat.reserved != '0'" (click)="reserve(seat)" id="{{ seat.id }}">
                  <mat-icon svgIcon="seat-icon"></mat-icon>
                </a>
                <div class="seat_num">{{ seat.seat_num }}</div>
              </div>
              } }
            </div>

            }@else{
            <div class="row seats-11 text-center">
              @for(seat of seats ;track $index ){ @if(($index+1)% 2== 0 ){
              <div class="col-2 img_location">
                <div class="">
                  <a routerLink="/book-trip/{{ tripId }}/{{ typeId }}" [class.not-clickable]="seat.reserved != '0'"
                    [class.seat-red]="seat.reserved != '0'" (click)="reserve(seat)" id="{{ seat.id }}">
                    <mat-icon svgIcon="seat-icon"></mat-icon>
                  </a>
                </div>
                <div class="seat_num">
                  {{ seat.seat_num }}
                </div>
              </div>
              } @if(($index+1)% 2 != 0 ){
              <div class="col-2 img_location">
                <a routerLink="/book-trip/{{ tripId }}/{{ typeId }}" [class.not-clickable]="seat.reserved != '0'"
                  [class.seat-red]="seat.reserved != '0'" (click)="reserve(seat)" id="{{ seat.id }}">
                  <mat-icon svgIcon="seat-icon"></mat-icon>
                </a>
                <div class="seat_num">{{ seat.seat_num }}</div>
              </div>
              <div class="col-8"></div>
              } }
            </div>
          }
            <!-- <button  class="btn btn-dark" matStepperNext>Show Selected seats</button> -->
            <div class="btn-edit">
              <button matStepperNext class="btn btn-dark btn-edit" (click)="calculateTotalPrice()">
                Next
              </button>
            </div>
            
          </div>


          <!-- slider start -->
          <div class="col-lg-7 col-md-7 slider_edit  container-fluid">
            <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img src="../../../assets/img/slider/img1.svg" class="d-block " alt="...">
                </div>
                <div class="carousel-item">
                  <img src="../../../assets/img/slider/img3.svg" class="d-block " alt="...">
                </div>
                <div class="carousel-item">
                  <img src="../../../assets/img/slider/img0.svg" class="d-block " alt="...">
                </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>

            <!-- slider end -->
          </div>
        </div>
        <!-- </div> -->
      </ng-template>
    </mat-step>
    <!-- ============================================================ -->
    <!-- second step -->
    <mat-step>
      <ng-template matStepLabel>My trip</ng-template>
      <ng-template matStepContent>
        <div class="row second-container">
          <div class="col-7">
            <i class="bi bi-circle text-primary"></i>
            <span class="text-capitalize">
              {{ details?.from_location }}
            </span>
          </div>
          <div class="col-5 text-end">
            {{ details?.time | timeFormat }}
          </div>

          <div class="col-12">
            <i class="bi bi-stopwatch text-success"></i>
            <span> Seats are reserved for a minute </span>
          </div>

          <div class="col-12">
            <i class="bi bi-geo-alt text-primary"></i>
            <span>
              {{ details?.to_location }}
            </span>
          </div>

          <div class="col-7">Departure date:</div>
          <div class="col-5 text-end">
            {{ details?.date | customDate }}
          </div>

          @for(select of selected ;track $index){
          <div class="col-7">seat number {{ select.seat_num }}</div>
          <div class="col-5 text-end">{{ details?.type }}</div>
          }

          <div class="col-7 font-edit">Price</div>
          <div class="col-5 text-end font-edit">{{ totalPrice }} LE</div>
        </div>

        <button class="btn btn-dark mt-4" matStepperNext>Next</button>
      </ng-template>
    </mat-step>
    <!-- ================================================= -->
    <mat-step>
      <ng-template matStepLabel>Payment methods</ng-template>
      <div>
        @if (totalPrice>0) {
        <app-payment [totalPrice]="totalPrice"> </app-payment>
        <div class="cancle_btn">
          <button class="btn btn-danger" (click)="cancle()">Cancle</button>
        </div>
        }
      </div>
    </mat-step>
  </mat-stepper>
</div>
<!-- footer -->
<app-footer></app-footer>


}@else {
<app-loader></app-loader>
}