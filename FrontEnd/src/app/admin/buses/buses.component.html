
<nav class="nav flex-column flex-sm-row nav-underline my-4 mx-3">
  <button
    id="nav5"
    class="flex-sm-fill text-sm-center nav-link active"
    (click)="goToType(5)"
  >
    VIP
  </button>
  <button
    id="nav4"
    class="flex-sm-fill text-sm-center nav-link"
    (click)="goToType(4)"
  >
    Royal Star
  </button>
  <button
    id="nav3"
    class="flex-sm-fill text-sm-center nav-link"
    (click)="goToType(3)"
  >
    First Business
  </button>
  <button
    id="nav2"
    class="flex-sm-fill text-sm-center nav-link"
    (click)="goToType(2)"
  >
    Classic
  </button>
  <button
    id="nav1"
    class="flex-sm-fill text-sm-center nav-link"
    (click)="goToType(1)"
  >
    Economy
  </button>
</nav>
<!-- vip -->
<div
  class="container d-flex justify-content-between"
  style="height: 60vh"
  id="vip"
>
  <div class="col-5 overflow-y-auto" id="busesDiv">
    <!-- <h2 > Number of Buses {{countBuses}}</h2> -->
    <div class="accordion accordion-flush" id="accordionFlushExample">
      @for (bus of buses; track $index) { @if(bus[chosenType]!=0) {

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            [attr.data-bs-target]="'#chairs' + $index"
            aria-expanded="false"
            aria-controls="flush-collapseOne"
          >
            {{ bus.chairs }} Chairs
          </button>
        </h2>
        <div
          id="chairs{{ $index }}"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionFlushExample"
        >
          <div class="accordion-body">
            @for (singleBus of bus.allBuses; track $index) {
            @if(singleBus.type_id==chosenType) {
            <div
              class="border border-1 pt-2 ps-2"
              data-bs-toggle="collapse"
              [attr.data-bs-target]="'#time' + singleBus.id"
              aria-expanded="false"
              aria-controls="collapseExample"
              style="height: 50px; width: 100%"
            >
              # No.{{ singleBus.id }}
            </div>
            <div id="time{{ singleBus.id }}" class="collapse">
              @if( singleBus.trips.length ==0) {
              <div
                class="ms-auto me-auto mt-3 iconshape1 text-center"
                style="width: 75%"
              >
                <div class="bg-info iconshape2 pt-2" style="height: 40px">
                  Available
                </div>
              </div>
              } @else{
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <!-- <th scope="col"></th> -->
                    <th class="text-center" scope="col">
                      <i class="fa-regular fa-calendar-days me-2 fs-4"></i>
                    </th>
                    <th class="text-center" scope="col">
                      <i class="fa-regular fa-clock me-2 fs-4"></i>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  @for(trip of singleBus.trips; track $index){
                  <tr>
                    <td class="text-center">{{ trip.date }}</td>
                    <td class="text-center">{{ trip.time | timeFormat }}</td>
                  </tr>
                  }
                </tbody>
              </table>
              }
            </div>
            }}
          </div>
        </div>
      </div>

      } }
    </div>
  </div>
  <div
    id="carouselExampleAutoplaying"
    class="carousel slide col-6"
    style="height: 100%"
    data-bs-ride="carousel"
  >
    <div class="carousel-inner" style="height: 100%">
      <div
        class="carousel-item active"
        data-bs-interval="2500"
        style="height: 100%"
      >
        @if(chosenType==1){
        <img
          src="../../../assets/img/vip/1.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
          
        />
        } @else if (chosenType==2 || chosenType==3){
        <img
          src="../../../assets/img/first/1.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }@else if (chosenType==4){
        <img
          src="../../../assets/img/classic/1.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }@else if (chosenType==5){
        <img
          src="../../../assets/img/economy/1.jfif"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }
      </div>

      <div class="carousel-item" data-bs-interval="2500" style="height: 100%">
        @if(chosenType==1){
        <img
          src="../../../assets/img/vip/2.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />
        }@else if (chosenType==2 || chosenType==3){
        <img
          src="../../../assets/img/first/2.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }@else if (chosenType==4){
        <img
          src="../../../assets/img/classic/2.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }@else if (chosenType==5){
        <img
          src="../../../assets/img/economy/2.jfif"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }
      </div>
      <div class="carousel-item" data-bs-interval="2500" style="height: 100%">
        @if(chosenType==1){
        <img
          src="../../../assets/img/vip/3.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />
        }@else if (chosenType==2 || chosenType==3){
        <img
          src="../../../assets/img/first/3.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        } @else if (chosenType==4){
        <img
          src="../../../assets/img/classic/3.jpg"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }@else if (chosenType==5){
        <img
          src="../../../assets/img/economy/3.jfif"
          class="d-block w-100"
          alt="..."
          style="height: 100%"
        />

        }
      </div>
    </div>
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#carouselExampleAutoplaying"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      id="clickItToWork"
      class="carousel-control-next"
      type="button"
      data-bs-target="#carouselExampleAutoplaying"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>

<!-- add bus modal -->
<div class="dropup-center dropup position-absolute bottom-10 end-10 col-6 ">
  <button
  id="btnToAdd"
    class="btn btn-primary fs-3"
    type="button"
    data-bs-toggle="dropdown"
    aria-expanded="false"
    data-bs-auto-close="outside"
    style="position: fixed; bottom: 20px; right: 50px; z-index: 400000"
  >
    <i class="fa-solid fa-plus"></i>
  </button>

  <form class="form-floating dropdown-menu p-4 text-center" 
  [formGroup]="newBusForm"
  (ngSubmit)="sendBus()">
    <div class="fs-4">New {{typeName}} Bus</div>
    <hr class="dropdown-divider">
    <div class="form-floating mb-3">
      <input type="number" class="form-control" min="1" name = "chairs" id="chairs" formControlName="chairs" placeholder="Number od Chairs">
      <label for="chairs">Number of Chairs</label>
    </div>
    <button type="submit" class="btn btn-primary">Add</button>
  </form>
</div>

<!-- end add bus modal -->

<!-- <div class="container"> -->
<!-- <table border="1">
  @for (bus of buses; track $index) {
  <tr>
    <td>{{ bus.id }}</td>
    <td>{{ bus.chairs }}</td>
    <td>{{ bus.type_id }}</td>
    <td>{{ bus.type }}</td>
    <td>
      @for(option of bus.options; track $index) {
      {{ option.id }} {{ option.option }}

      }
    </td>
  </tr>
  }
</table> -->
<!-- </div> -->
