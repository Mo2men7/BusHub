<div class="text-center my-4" style="height: 80vh">
  <div class="text-center my-4">
    <button
      type="button"
      class="btn add-button"
      class="btn add-button"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
    >
      Add New Destination
    </button>
  </div>
  <div class="d-flex" style="height: 100%">
    <div
      class="accordion accordion-flush col-4 overflow-y-auto"
      id="accordionFlushExample"
      style="height: 100%"
    >
      @for (item of destinations; track $index) {
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            (click)="showMap($index)"
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            [attr.data-bs-target]="'#acc' + $index + 1"
            aria-expanded="false"
            aria-controls="flush-collapseOne"

          >
            {{ item.name }}
          </button>
        </h2>
        <div
          id="{{ 'acc' + $index + 1 }}"
          class="accordion-collapse collapse"
          data-bs-parent="#accordionFlushExample"
        >
          <div class="accordion-body">
            <div class="card text-bg-dark border border-0">
              <img src="{{ item.pic }}" class="card-img" alt="..." />
              <div class="card-img-overlay bg-black cardBackground">
                <!-- <h5 class="card-title">Card title</h5> -->
                <p class="card-text text-start">{{ item.info }}</p>
                <!-- <p class="card-text"><small>Last updated 3 mins ago</small></p> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      }
    </div>
    <div id="iframeDiv" class="ratio ratio-16x9 fade active show">
      <iframe src="" title="YouTube video" allowfullscreen></iframe>
      <!-- <div class=" showOnLoading" > -->
      <!-- <i class="fa-solid fa-globe fa-fade" style="font-size: 20vw;"></i> -->
      <!-- <i class="fa-solid fa-location-dot" ></i> -->
      <!-- </div> -->
    </div>
  </div>

  <table class="table table-hover border border-1" hidden>
    <thead>
      <tr>
        <th scope="col" class="col-1">#</th>
        <th scope="col" class="col-2">Destination</th>
        <th scope="col">Info.</th>
        <th scope="col" class="col-1">Flag</th>
        <th scope="col" class="col-1">Picture</th>
        <th scope="col" class="col-1">Map</th>
      </tr>
    </thead>
    <tbody>
      @for (item of destinations; track $index) {
      <tr>
        <th scope="row">{{ $index + 1 }}</th>
        <td>{{ item.name }}</td>
        <td
          style="
            max-width: 10vw;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          "
        >
          {{ item.info }}
        </td>
        <td>
          <img src="{{ item.flag }}" style="height: 20px; width: 40px" alt="" />
        </td>
        <td>
          <a
            href="#"
            data-bs-toggle="modal"
            [attr.data-bs-target]="'#pic' + $index + 1"
          >
            <i class="fa-solid fa-arrow-up-right-from-square"></i>
          </a>
        </td>
        <!-- [attr.data-target]="'#' + theme.themeId" -->
        <td>
          <a
            href="#"
            data-bs-toggle="modal"
            [attr.data-bs-target]="'#map' + $index + 1"
          >
            <i class="fa-solid fa-arrow-up-right-from-square"></i>
          </a>
        </td>
        <!-- <td>@mdo</td> -->
      </tr>

      <!-- modal -->
      <div
        class="modal fade"
        style="width: 100vw; height: 80vh"
        id="{{ 'map' + $index + 1 }}"
        tabindex="-1"
        [attr.aria-labelledby]="$index + 1 + 'Label'"
        aria-hidden="true"
      >
        <div
          class="modal-dialog modal-dialog-centered"
          style="width: 100vw; height: 70vh"
        >
          <iframe
            class="modal-content"
            [src]="item.map | safe"
            style="border: 0; height: 100%; width: 100%"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
      <div
        class="modal fade"
        id="{{ 'pic' + $index + 1 }}"
        tabindex="-1"
        [attr.aria-labelledby]="$index + 1 + 'Label'"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <img [src]="item.pic" style="border: 0; height: 100%; width: 100%" />
        </div>
      </div>
      <!-- end modal-->
      }
    </tbody>
  </table>

  <!-- Button trigger modal -->

  <form
    #adddest="ngForm"
    (ngSubmit)="sendDestination(adddest)"
    class="modal fade"
    id="exampleModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
    enctype="multipart/form-data"
  >
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">
            Add New Destination
          </h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div class="form-floating mb-4">
            <input
              ngModel
              #name="ngModel"
              type="text"
              class="form-control"
              id="name"
              placeholder="Name"
              name="name"
            />
            <label for="name">Name</label>
          </div>
          <div class="form-floating mb-4">
            <textarea
              ngModel
              #info="ngModel"
              class="form-control"
              id="info"
              placeholder="Info."
              name="info"
            ></textarea>
            <label for="info">Info.</label>
          </div>
          <div class="form-floating mb-4">
            <input
              ngModel
              #flag="ngModel"
              type="text"
              class="form-control"
              id="flag"
              placeholder="Flag Link"
              name="flag"
            />
            <label for="flag">Flag Link</label>
          </div>
          <div class="form-floating mb-4">
            <input
              ngModel
              #pic="ngModel"
              type="text"
              class="form-control"
              id="pic"
              placeholder="Picture Link"
              name="pic"
            />
            <label for="pic">Picture Link</label>
          </div>
          <div class="form-floating mb-4 d-flex align-items-baseline">
            <input
              ngModel
              #map="ngModel"
              type="text"
              class="form-control"
              id="map"
              placeholder="Location in Google Maps"
              name="map"
            />
            <label for="map">Location in Google Maps</label>
            <a
              href="https://www.google.com/maps"
              target="_blank"
              class="btn add-button ms-2"
              class="btn add-button ms-2"
              ><i class="fa-solid fa-arrow-up-right-from-square"></i
            ></a>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="submit" class="btn add-button" data-bs-dismiss="modal">
            Add
          </button>
          <button type="submit" class="btn add-button" data-bs-dismiss="modal">
            Add
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
